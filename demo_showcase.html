<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TH Keypad Demo Showcase</title>
    <style>
        :root {
            /* Color variables */
            --bg-color: #f0f0f0;
            --container-bg: #333;
            --button-bg: #444;
            --button-hover: #555;
            --text-color: #e0e0e0;
            --accent-color: #4CAF50;
            --accent-hover: #45a049;
            
            /* Spacing and sizing */
            --container-padding: 30px;
            --border-radius: 10px;
        }
        
        body {
            font-family: Arial, sans-serif;
            background-color: var(--bg-color);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            touch-action: manipulation;
            -webkit-overflow-scrolling: touch;
            overscroll-behavior: none;
        }
        
        .header {
            background-color: var(--container-bg);
            border-radius: var(--border-radius);
            padding: 20px 30px;
            width: 90%;
            max-width: 1200px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            color: var(--text-color);
            margin-bottom: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .title {
            margin: 0 0 20px 0;
            text-align: center;
        }
        
        .controls {
            width: 100%;
            max-width: 600px;
            display: flex;
            flex-direction: column;
        }
        
        .demo-select {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border-radius: var(--border-radius);
            border: none;
            background-color: var(--button-bg);
            color: var(--text-color);
            cursor: pointer;
            margin-bottom: 15px;
            -webkit-appearance: none;
            appearance: none;
            background-image: url("data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23ffffff%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E");
            background-repeat: no-repeat;
            background-position: right 12px top 50%;
            background-size: 12px auto;
            padding-right: 30px;
        }
        
        .demo-select:focus {
            outline: none;
            box-shadow: 0 0 0 2px var(--accent-color);
        }
        
        .demo-select option {
            background-color: var(--container-bg);
            color: var(--text-color);
            padding: 10px;
        }
        
        .demo-select optgroup {
            font-weight: bold;
            color: var(--accent-color);
        }
        
        .demo-container {
            width: 90%;
            max-width: 1200px;
            height: 700px;
            background-color: var(--container-bg);
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: 0 10px 25px rgba(0,0,0,0.3);
            display: flex;
            flex-direction: column;
            position: relative;
            overscroll-behavior: contain;
        }
        
        .demo-frame {
            width: 100%;
            height: 100%;
            border: none;
            transition: opacity 0.3s ease;
            overflow: hidden;
        }
        
        .demo-description {
            background-color: rgba(51, 51, 51, 0.95);
            color: var(--text-color);
            padding: 15px 20px;
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            max-height: 30%;
            overflow-y: auto;
            transform: translateY(100%);
            transition: transform 0.3s ease;
            -webkit-overflow-scrolling: touch;
            z-index: 20;
        }
        
        .show-description {
            background-color: var(--accent-color);
            color: white;
            border: none;
            padding: 10px 16px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            position: absolute;
            bottom: 15px;
            right: 15px;
            z-index: 25;
            transition: background-color 0.3s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        
        .show-description:hover {
            background-color: var(--accent-hover);
        }

        .show-description:active {
            transform: translateY(2px);
        }
        
        .description-active .demo-description {
            transform: translateY(0);
        }
        
        .loading-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(51, 51, 51, 0.7);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 15;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.3s ease;
        }
        
        .loading-overlay.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            border-top-color: var(--accent-color);
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* Close button for description panel on mobile */
        .close-description {
            display: none;
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            color: white;
            font-size: 20px;
            cursor: pointer;
            padding: 5px;
        }
        
        @media (max-width: 768px) {
            .header, .demo-container {
                width: 95%;
            }
            
            .demo-container {
                height: 600px;
            }
            
            /* Make the description panel take up more space on mobile */
            .demo-description {
                max-height: 50%;
            }
            
            /* Show close button for the description panel on mobile */
            .close-description {
                display: block;
            }
            
            /* Make the Show Info button larger and easier to tap on mobile */
            .show-description {
                padding: 12px 20px;
                bottom: 20px;
                right: 20px;
            }
            
            /* Prevent scroll issues on mobile */
            .description-active {
                touch-action: none;
            }
            
            body.description-open {
                overflow: hidden;
                position: fixed;
                width: 100%;
                height: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1 class="title">TH Keypad Demo Showcase</h1>
        <div class="controls">
            <select id="demoSelector" class="demo-select">
                <option value="" selected disabled>Select a Demo</option>
                
                <optgroup label="Four Key Button Sum Demos">
                    <option value="src/demos/keypad/key_pad_security_nibble_v1.1.html" data-description="Basic four key security system using nibble sum approach (version 1.1)">Nibble Sum Demo v1.1</option>
                    <option value="src/demos/keypad/key_pad_security_nibble_v2.0.html" data-description="Improved four key security system using nibble sum approach (version 2.0)">Nibble Sum Demo v2.0</option>
                    <option value="src/demos/keypad/nibble_3.4.html" data-description="Advanced four key security system using nibble sum approach with enhanced features (version 3.4)">Nibble Sum Demo v3.4</option>
                </optgroup>

                <optgroup label="Three Button Nibble Demos">
                    <option value="src/demos/keypad/3btn_nibble_3.5.html" data-description="Three button keypad using nibble sum technique (version 3.5)">Three Button Nibble Demo v3.5</option>
                    <option value="src/demos/keypad/3btn_SML_v1.3.html" data-description="Three button keypad using SML (Small-Medium-Large) interactions (version 1.3)">Three Button SML Demo v1.3</option>
                </optgroup>
                
                <optgroup label="Four Button Letters Demos">
                    <option value="src/demos/keypad/key_pad_security_letters_v1.html" data-description="Four key security system using letter combinations (version 1.0)">Letters Demo v1.0</option>
                    <option value="src/demos/keypad/key_pad_security_letters_v2.html" data-description="Improved four key security system using letter combinations (version 2.1)">Letters Demo v2.1</option>
                    <option value="src/demos/keypad/letters_3.0.html" data-description="Advanced four key security system using letter combinations (version 3.0)">Letters Demo v3.0</option>
                    <option value="src/demos/keypad/letters_3.2.html" data-description="Further enhanced four key security system using letter combinations (version 3.2)">Letters Demo v3.2</option>
                </optgroup>

                <optgroup label="Three Button AB-BA-ABC Demos">
                    <option value="src/demos/keypad/AB-BA-ABC_1.3.html" data-description="Three button keypad using AB-BA-ABC sequences (version 1.3)">AB-BA-ABC Demo v1.3</option>
                    <option value="src/demos/keypad/AB-BA-ABC_2.1.html" data-description="Improved three button keypad using AB-BA-ABC sequences (version 2.1)">AB-BA-ABC Demo v2.1</option>
                </optgroup>
                
                <optgroup label="Four Button PIN Demos">
                    <option value="src/demos/keypad/key_pad_security_pin_v1.html" data-description="Four key security system using PIN codes (version 1.1)">Four Digit PIN Demo v1.1</option>
                    <option value="src/demos/keypad/pin_2.1.html" data-description="Improved four key security system using PIN codes (version 2.1)">Four Digit PIN Demo v2.1</option>
                </optgroup>

                <optgroup label="N4 (four key) Demos">
                    <option value="src/demos/keypad/n4-3_1.3.html" data-description="N4-3 PIN system with four keys (version 1.3)">N4-3 PIN Demo v1.3</option>
                </optgroup>

                <optgroup label="N3 (three key) Demos">
                    <option value="src/demos/keypad/n3-4_1.0.html" data-description="N3-4 PIN system with three keys (version 1.0)">N3-4 PIN Demo v1.0</option>
                    <option value="src/demos/keypad/n3-3_1.0.html" data-description="N3-3 PIN system with three keys (version 1.0)">N3-3 PIN Demo v1.0</option>
                </optgroup>

                <optgroup label="Up-Down Selection Demos">
                    <option value="src/demos/keypad/up-down_1.0.html" data-description="Up-Down selection system for navigation and option selection (version 1.0)">Up-Down Selection System v1.0</option>
                </optgroup>

                <optgroup label="Editor Demos">
                    <option value="src/demos/editor/png-editor.html" data-description="PNG editor utility for creating and editing PNG files">PNG Editor</option>
                </optgroup>
            </select>
        </div>
    </div>
    
    <div class="demo-container" id="demoContainer">
        <iframe id="demoFrame" class="demo-frame" src="about:blank" sandbox="allow-same-origin allow-scripts allow-forms" scrolling="no"></iframe>
        <div class="loading-overlay" id="loadingOverlay">
            <div class="spinner"></div>
        </div>
        <button id="showDescription" class="show-description">Show Info</button>
        <div class="demo-description" id="demoDescription">
            <button id="closeDescription" class="close-description">✕</button>
            <h3 id="demoTitle">Select a demo from the dropdown above</h3>
            <p id="demoText">The description of the selected demo will appear here.</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const demoSelector = document.getElementById('demoSelector');
            const demoFrame = document.getElementById('demoFrame');
            const demoContainer = document.getElementById('demoContainer');
            const demoDescription = document.getElementById('demoDescription');
            const showDescriptionBtn = document.getElementById('showDescription');
            const closeDescriptionBtn = document.getElementById('closeDescription');
            const demoTitle = document.getElementById('demoTitle');
            const demoText = document.getElementById('demoText');
            const loadingOverlay = document.getElementById('loadingOverlay');
            const body = document.body;
            
            // Detect mobile device
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            
            if (isMobile) {
                demoContainer.classList.add('mobile');
            }
            
            // Load the selected demo
            demoSelector.addEventListener('change', function() {
                const selectedOption = this.options[this.selectedIndex];
                const demoUrl = selectedOption.value;
                const demoName = selectedOption.textContent;
                const demoDesc = selectedOption.getAttribute('data-description') || 'No description available';
                
                // Show loading indicator
                loadingOverlay.classList.add('active');
                
                // Set the iframe source
                demoFrame.style.opacity = 0;
                setTimeout(() => {
                    demoFrame.src = demoUrl;
                    demoFrame.onload = function() {
                        // Hide loading indicator and show iframe
                        loadingOverlay.classList.remove('active');
                        demoFrame.style.opacity = 1;
                        
                        // Try to inject touch event handling into the iframe content
                        try {
                            const iframeDoc = demoFrame.contentDocument || demoFrame.contentWindow.document;
                            const style = iframeDoc.createElement('style');
                            style.textContent = `
                                body { touch-action: manipulation; -webkit-overflow-scrolling: touch; }
                                button, input, select { touch-action: manipulation; }
                            `;
                            iframeDoc.head.appendChild(style);
                        } catch (e) {
                            console.log('Cannot modify iframe content due to same-origin policy');
                        }
                    };
                }, 300);
                
                // Update description
                demoTitle.textContent = demoName;
                demoText.textContent = demoDesc;
            });
            
            // Toggle description visibility
            showDescriptionBtn.addEventListener('click', function() {
                demoContainer.classList.toggle('description-active');
                this.textContent = demoContainer.classList.contains('description-active') ? 'Hide Info' : 'Show Info';
                
                // On mobile, prevent body scrolling when description is open
                if (isMobile) {
                    if (demoContainer.classList.contains('description-active')) {
                        body.classList.add('description-open');
                    } else {
                        body.classList.remove('description-open');
                    }
                }
            });
            
            // Close description with the X button (mobile)
            closeDescriptionBtn.addEventListener('click', function() {
                demoContainer.classList.remove('description-active');
                showDescriptionBtn.textContent = 'Show Info';
                body.classList.remove('description-open');
            });
            
            // Handle iframe load events
            demoFrame.addEventListener('load', function() {
                if (this.src !== 'about:blank') {
                    // Successfully loaded a demo
                    console.log('Demo loaded:', this.src);
                }
            });
            
            demoFrame.addEventListener('error', function() {
                console.error('Failed to load demo:', this.src);
                loadingOverlay.classList.remove('active');
                demoFrame.srcdoc = `
                    <html>
                    <body style="display: flex; justify-content: center; align-items: center; height: 100%; margin: 0; background-color: #333; color: white; font-family: Arial, sans-serif; touch-action: manipulation;">
                        <div style="text-align: center; padding: 20px;">
                            <h2>Error Loading Demo</h2>
                            <p>The selected demo could not be loaded. Please try another one.</p>
                        </div>
                    </body>
                    </html>
                `;
            });
            
            // Prevent touch conflicts on mobile
            if (isMobile) {
                // Prevent pinch zoom on the container
                demoContainer.addEventListener('touchmove', function(e) {
                    if (e.touches.length > 1) {
                        e.preventDefault();
                    }
                }, { passive: false });
                
                // Handle touch events inside description panel
                demoDescription.addEventListener('touchstart', function(e) {
                    e.stopPropagation();
                });
                
                demoDescription.addEventListener('touchmove', function(e) {
                    e.stopPropagation();
                });
            }
        });
    </script>
</body>
</html> 